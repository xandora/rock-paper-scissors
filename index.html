<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors Game</title>
</head>

<body>
    <h1>Rock Paper Scissors!</h1>
    
    <script>
        let playerScore = 0;
        let computerScore = 0;
        let draws = 0;
        let gamesPlayed = 0;
        
        const moves = ["Rock", "Paper", "Scissors"];

        const gameButtonBox = document.createElement("div");
        gameButtonBox.id = "#game-button-box";
        document.body.appendChild(gameButtonBox);
        const gameScoreBox = document.createElement("div");
        gameScoreBox.id = "#game-score-box";
        document.body.appendChild(gameScoreBox);
        
        const score = document.createElement('p');
        const outcome = document.createElement('p');
        
        function computerPlay() {
            return moves[Math.floor(Math.random()*moves.length)];
        }

        function playRound(playerSelection, computerSelection) {
            let playerGo =  playerSelection;
            let computerGo = computerSelection;
            if (
                (playerGo == moves[0] && computerGo == moves[2]) ||
                (playerGo == moves[1] && computerGo == moves[0]) ||
                (playerGo == moves[2] && computerGo == moves[1])
                ) {
                playerScore++;
                return "You win! " + playerGo + " beats " + computerGo + ".";
            }
            else if (playerGo == computerGo) {
                draws++;
                return "It's a draw!";
            }
            else {
                computerScore++;
                return "You lose! " + computerGo + " beats " + playerGo + ".";
            }

        }

        function resetGame(){
                gamesPlayed = 0;
                playerScore = 0;
                computerScore = 0;
                draws = 0;
        };

        function playGame(e){
            gamesPlayed++;
            const playerMove = e.target.id;
            playRound(playerMove, computerPlay());
            if (gamesPlayed >= 5) {
                score.textContent = "Player Score: " + playerScore + ", Computer Score: " + computerScore + ", Draws: " + draws + ".";
                outcome.textContent = "Game over! Player Score: " + playerScore + ", Computer Score: " + computerScore;
                resetGame();
            } else {
                score.textContent = "Player Score: " + playerScore + ", Computer Score: " + computerScore + ", Draws: " + draws + ".";
            };
        };
        
        moves.forEach(move => {
            var buttonName = "btn" + move;
            buttonName = document.createElement('button');
            buttonName.classList = "button";
            buttonName.id = move;
            buttonName.innerHTML = move + "!";
            gameButtonBox.appendChild(buttonName);
        });

        gameScoreBox.appendChild(score);
        gameScoreBox.appendChild(outcome);

        const btns = document.querySelectorAll(".button");
        btns.forEach(btn => btn.addEventListener("click", playGame));
    </script>
</body>

</html>